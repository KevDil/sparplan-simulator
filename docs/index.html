<!doctype html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ETF Sparplan & Entnahme Simulator | Monte-Carlo-Analyse</title>
  
  <!-- SEO Meta Tags -->
  <meta name="description" content="Kostenloser ETF-Sparplanrechner mit Monte-Carlo-Simulation. Berechne Verm√∂gensaufbau, 4%-Regel, Entnahmestrategien und Steuern (DE). Vorabpauschale, FIFO/LIFO, Kapitalerhalt-Modus.">
  <meta name="keywords" content="ETF Rechner, Sparplan, Entnahmerechner, 4% Regel, Monte-Carlo, Vorabpauschale, FIRE, Altersvorsorge, Kapitalertragsteuer">
  <meta name="author" content="ETF Simulator">
  <meta name="robots" content="index, follow">
  <meta name="language" content="de">
  
  <!-- Open Graph / Social Media -->
  <meta property="og:title" content="ETF Sparplan & Entnahme Simulator">
  <meta property="og:description" content="Kostenloser Rechner f√ºr ETF-Sparpl√§ne mit Monte-Carlo-Simulation, Steuerberechnung und Entnahmestrategien.">
  <meta property="og:type" content="website">
  <meta property="og:locale" content="de_DE">
  
  <!-- Favicon -->
  <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üìä</text></svg>">
  
  <!-- Styles -->
  <link rel="stylesheet" href="styles.css">
  
</head>
<body>
  <!-- Accessibility: Skip Link f√ºr Keyboard-Navigation -->
  <a href="#sim-form" class="skip-link">Zum Formular springen</a>
  
  <header class="topbar" role="banner">
    <div class="brand">
      <div class="brand__dot"></div>
      <div>
        <p class="eyebrow">ETF & Tagesgeld</p>
        <h1>Sparplan- & Entnahme-Simulator</h1>
      </div>
    </div>
    <button class="btn-info" id="btn-info" title="Wie funktioniert die Simulation?">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <circle cx="12" cy="12" r="10"/>
        <path d="M12 16v-4M12 8h.01"/>
      </svg>
      Wie funktioniert's?
    </button>
  </header>

  <!-- Info Modal -->
  <div class="modal-overlay" id="info-modal" aria-hidden="true">
    <div class="modal">
      <div class="modal-header">
        <h2>Wie funktioniert die Simulation?</h2>
        <button class="modal-close" id="modal-close" aria-label="Schlie√üen">&times;</button>
      </div>
      <div class="modal-body">
        <section class="info-section">
          <h3>üìä Simulations√ºbersicht</h3>
          <p>Die Simulation berechnet deinen Verm√∂gensverlauf in zwei Phasen:</p>
          <ul>
            <li><strong>Ansparphase:</strong> Monatliche Sparraten (TG + ETF), optional mit j√§hrlicher Dynamik. Erreicht das TG das Ziel, flie√üt der √úberschuss in den ETF.</li>
            <li><strong>Entnahmephase:</strong> Fester EUR-Betrag oder %-Regel (z.B. 4%-Regel), optional inflationsangepasst. Entnahme-Reihenfolge: TG-√úberschuss ‚Üí ETF ‚Üí TG unter Ziel.</li>
            <li><strong>Sonderausgaben:</strong> Gr√∂√üere Einmalkosten (z.B. Auto) alle X Jahre, f√ºr beide Phasen separat einstellbar.</li>
          </ul>
        </section>

        <section class="info-section">
          <h3>üé≤ Monte-Carlo-Simulation</h3>
          <p>Hunderte bis tausende Durchl√§ufe mit <strong>zuf√§lligen ETF-Renditen</strong> (normalverteilt um die erwartete Rendite). Zeigt die Verteilung m√∂glicher Ergebnisse als Konfidenz-B√§nder.</p>
          <ul>
            <li><strong>Volatilit√§t:</strong> Typisch 15-20% p.a. f√ºr Aktien-ETFs</li>
            <li><strong>Erfolgswahrscheinlichkeit:</strong> % der Simulationen ohne Engpass und positivem Endverm√∂gen</li>
            <li><strong>Perzentile:</strong> 25% (Konservativ), 50% (Median), 75% (Optimistisch)</li>
          </ul>
        </section>

        <section class="info-section">
          <h3>üí∞ Steuern (Deutschland)</h3>
          <ul>
            <li><strong>Kapitalertragsteuer:</strong> 26,375% (inkl. Soli), mit KiSt ~27,8-28%</li>
            <li><strong>Teilfreistellung:</strong> 30% der ETF-Gewinne sind steuerfrei</li>
            <li><strong>Sparerpauschbetrag:</strong> 1.000‚Ç¨/2.000‚Ç¨ j√§hrlich steuerfrei</li>
            <li><strong>Vorabpauschale:</strong> J√§hrliche Steuer auf thesaurierende ETFs (Basiszins √ó 0,7)</li>
            <li><strong>FIFO/LIFO:</strong> Verkaufsreihenfolge ‚Äì FIFO ist gesetzlich vorgeschrieben, LIFO oft g√ºnstiger</li>
            <li><strong>Verlusttopf:</strong> Ein allgemeiner Topf f√ºr ETF-Gewinne/-Verluste (nach Teilfreistellung), Zinsen und Vorabpauschale. (Aktien-Topf nur f√ºr Einzelaktien, hier nicht modelliert.)</li>
          </ul>
        </section>

        <section class="info-section">
          <h3>&#x1F6E1;&#xFE0F; Kapitalerhalt &amp; Risiko</h3>
          <ul>
            <li><strong>Kapitalerhalt-Modus:</strong> Reduziert Entnahme automatisch, wenn Verm√∂gen unter Schwellwert f√§llt</li>
            <li><strong>Sequence-of-Returns-Risk:</strong> Fr√ºhe Crashs in der Entnahmephase sind besonders sch√§dlich ‚Äì die SoRR-Kennzahlen zeigen dieses Risiko</li>
            <li><strong>Strategien:</strong> Gr√∂√üerer Cash-Puffer, flexible Entnahme, Bond-Tent</li>
          </ul>
        </section>

        <section class="info-section">
          <h3>üìà Wichtige Kennzahlen</h3>
          <ul>
            <li><strong>Nominal vs. Real:</strong> Nominale Werte sind absolute Betr√§ge, reale sind kaufkraftbereinigt</li>
            <li><strong>Effektive Entnahmerate:</strong> Tats√§chliche j√§hrliche Entnahme in % des Startverm√∂gens</li>
            <li><strong>Kapitalerhalt-Rate:</strong> % der MC-Simulationen mit Endverm√∂gen ‚â• Startverm√∂gen</li>
            <li><strong>Pleite-Risiko:</strong> % mit Verm√∂gen unter Ruin-Schwelle (Standard: 10% des Rentenstarts) oder Shortfall in Entnahmephase</li>
          </ul>
        </section>

        <section class="info-section">
          <h3>‚ö†Ô∏è Hinweise</h3>
          <ul>
            <li>Simulation ‚â† Vorhersage ‚Äì historische Renditen garantieren keine zuk√ºnftigen Ergebnisse</li>
            <li>Deutsches Steuerrecht 2025 ‚Äì inkl. allgemeinem Verlusttopf f√ºr ETFs, Zinsen und Vorabpauschale</li>
            <li>Inflation, TG-Zins und TER sind fix ‚Äì nur ETF-Renditen variieren in Monte-Carlo</li>
            <li>Eingaben werden im Browser gespeichert, Export als CSV/PDF m√∂glich</li>
          </ul>
        </section>
      </div>
    </div>
  </div>

  <main class="page" role="main">
    <section class="panel panel--inputs" aria-label="Eingabeparameter">
      <form id="sim-form" novalidate aria-label="Sparplan-Simulation Formular">
        <div class="group">
          <div class="group__header">
            <h2>Basisdaten & Zinsen</h2>
            <p>Startwerte, Zinsen und TG-Ziel.</p>
          </div>
          <div class="grid">
            <label class="field">
              <span class="field-label" data-tooltip="Aktueller Kontostand auf deinem Tagesgeldkonto zu Beginn der Simulation.">Start Tagesgeld (EUR)</span>
              <input type="number" step="100" id="start_savings" value="4000" min="0" max="100000000">
            </label>
            <label class="field">
              <span class="field-label" data-tooltip="Aktueller Wert deines ETF-Depots zu Beginn der Simulation.">Start ETF (EUR)</span>
              <input type="number" step="100" id="start_etf" value="100" min="0" max="100000000">
            </label>
            <label class="field">
              <span class="field-label" data-tooltip="Urspr√ºnglicher Kaufpreis deines ETF-Altbestands. Wichtig f√ºr korrekte Steuerberechnung. Leer lassen oder 0 = kein unrealisierter Gewinn.">Einstand Altbestand (EUR)</span>
              <input type="number" step="100" id="start_etf_cost_basis" value="0" min="0" max="100000000">
              <small class="field-hint">0 = keine Altgewinne (Einstand = aktueller Wert)</small>
            </label>
            <label class="field">
              <span class="field-label" data-tooltip="J√§hrlicher Zinssatz f√ºr dein Tagesgeldkonto. Aktuelle Zinsen liegen bei 2-4%.">Tagesgeld Zins p.a. (%)</span>
              <input type="number" step="0.1" id="savings_rate" value="3.0" min="-10" max="50">
            </label>
            <label class="field">
              <span class="field-label" data-tooltip="Erwartete j√§hrliche ETF-Rendite vor Kosten. Historisch ~7% f√ºr MSCI World (inflationsbereinigt ~5%).">ETF Rendite p.a. (%)</span>
              <input type="number" step="0.1" id="etf_rate" value="6.0" min="-50" max="50">
            </label>
            <label class="field">
              <span class="field-label" data-tooltip="Total Expense Ratio - j√§hrliche Fondskosten, die automatisch vom ETF-Wert abgezogen werden. Typisch 0.1-0.5% f√ºr ETFs.">ETF Kosten (TER) p.a. (%)</span>
              <input type="number" step="0.01" id="etf_ter" value="0.2" min="0" max="5">
            </label>
            <label class="field">
              <span class="field-label" data-tooltip="Ziel-Saldo f√ºr Tagesgeld (Notgroschen). √úbersch√ºsse werden automatisch in ETF umgeschichtet.">Tagesgeld-Ziel (EUR)</span>
              <input type="number" step="100" id="savings_target" value="5000" min="0" max="10000000">
            </label>
            <label class="field">
              <span class="field-label" data-tooltip="J√§hrliche Inflationsrate f√ºr Kaufkraftberechnung. EZB-Ziel: 2%, historisch ~2-3%.">Inflation p.a. (%)</span>
              <input type="number" step="0.1" id="inflation_rate" value="2.0" min="-10" max="30">
            </label>
            <label class="field">
              <span class="field-label" data-tooltip="J√§hrlicher steuerfreier Freibetrag f√ºr Kapitalertr√§ge. 1.000‚Ç¨ f√ºr Singles, 2.000‚Ç¨ f√ºr Verheiratete.">Sparerpauschbetrag (EUR)</span>
              <input type="number" step="100" id="sparerpauschbetrag" value="1000" min="0" max="10000">
              <small class="field-hint">1000 EUR (Single) / 2000 EUR (Verheiratet)</small>
            </label>
            <label class="field">
              <span class="field-label" data-tooltip="Zus√§tzliche Steuer auf Kapitalertr√§ge f√ºr Kirchenmitglieder. Reduziert die Kapitalertragsteuer leicht (Sonderausgabenabzug).">Kirchensteuer</span>
              <select id="kirchensteuer">
                <option value="keine">Keine Kirchensteuer</option>
                <option value="8">8% (Bayern, Baden-W\u00fcrttemberg)</option>
                <option value="9">9% (andere Bundesl\u00e4nder)</option>
              </select>
            </label>
            <label class="field">
              <span class="field-label" data-tooltip="Basiszins f√ºr die Vorabpauschale bei thesaurierenden ETFs. Wird von der Bundesbank festgelegt (2024: 2,29%, 2025: 2,53%).">Basiszins Vorabpauschale (%)</span>
              <input type="number" step="0.01" id="basiszins" value="2.53" min="-5" max="10">
              <small class="field-hint">2024: 2,29% | 2025: 2,53%</small>
            </label>
            <label class="field">
              <span class="field-label" data-tooltip="Fondstyp bestimmt die Teilfreistellung: Aktienfonds (30% steuerfrei), Mischfonds (15% steuerfrei), Rentenfonds/Andere (0% steuerfrei). ¬ß 20 InvStG.">Fondstyp (Teilfreistellung)</span>
              <select id="fondstyp">
                <option value="aktien">Aktienfonds (30% steuerfrei)</option>
                <option value="misch">Mischfonds (15% steuerfrei)</option>
                <option value="renten">Rentenfonds/Andere (0% steuerfrei)</option>
              </select>
              <small class="field-hint">Beeinflusst Besteuerung von Gewinnen &amp; Vorabpauschale</small>
            </label>
            <label class="field">
              <span class="field-label" data-tooltip="Bestehender allgemeiner Verlusttopf aus Vorjahren. Wird mit ETF-Gewinnen/-Verlusten, Zinsen und Vorabpauschale verrechnet. Nach deutschem Steuerrecht geh√∂ren ETFs in den allgemeinen Topf (Aktien-Topf nur f√ºr Einzelaktien).">Verlusttopf (EUR)</span>
              <input type="number" step="100" id="loss_pot" value="0" min="0" max="10000000">
              <small class="field-hint">F√ºr ETFs, Zinsen &amp; Vorabpauschale</small>
            </label>
            <label class="field field--checkbox">
              <input type="checkbox" id="use_lifo">
              <span class="field-label" data-tooltip="LIFO (Last In, First Out): Zuletzt gekaufte Anteile werden zuerst verkauft - oft steuerlich g√ºnstiger, aber NICHT gesetzeskonform! Nach ¬ß 20 Abs. 4 EStG ist f√ºr private Anleger FIFO (First In, First Out) zwingend vorgeschrieben. LIFO dient hier nur zum Vergleich/Analyse.">LIFO-Prinzip verwenden</span>
              <small class="field-hint">Nur zur Analyse! LIFO ist in DE f√ºr Privatanleger <strong>nicht zul√§ssig</strong> (¬ß 20 Abs. 4 EStG)</small>
            </label>
          </div>
        </div>

        <div class="group">
          <div class="group__header">
            <h2>Ansparphase</h2>
            <p>Monatliche Raten, Dynamik und Sonderausgaben.</p>
          </div>
          <div class="grid">
            <label class="field">
              <span class="field-label" data-tooltip="Wie lange du monatlich einzahlen m√∂chtest, bevor die Entnahmephase beginnt (z.B. bis zur Rente).">Dauer Ansparen (Jahre)</span>
              <input type="number" step="1" id="years_save" value="36" min="1" max="100">
            </label>
            <label class="field">
              <span class="field-label" data-tooltip="Monatlicher Sparbetrag auf das Tagesgeldkonto. Wird j√§hrlich um die Gehaltserh√∂hung angepasst.">Monatlich Tagesgeld (EUR)</span>
              <input type="number" step="50" id="monthly_savings" value="100" min="0" max="1000000">
            </label>
            <label class="field">
              <span class="field-label" data-tooltip="Monatlicher Sparplan-Betrag f√ºr den ETF. Wird j√§hrlich um die Gehaltserh√∂hung angepasst.">Monatlich ETF (EUR)</span>
              <input type="number" step="50" id="monthly_etf" value="150" min="0" max="1000000">
            </label>
            <label class="field">
              <span class="field-label" data-tooltip="J√§hrliche Erh√∂hung deiner Sparraten (TG + ETF). Typisch: 2-3% entsprechend der Inflation/Gehaltssteigerung.">Gehaltserh√∂hung p.a. (%)</span>
              <input type="number" step="0.1" id="annual_raise" value="3.0" min="-10" max="50">
            </label>
            <label class="field">
              <span class="field-label" data-tooltip="Gr√∂√üere Einmalausgaben in der Ansparphase (z.B. Auto, Urlaub, Renovierung). Werden vom Verm√∂gen abgezogen.">Sonderausgabe Anspar (EUR)</span>
              <input type="number" step="500" id="special_savings" value="15000" min="0" max="10000000">
            </label>
            <label class="field">
              <span class="field-label" data-tooltip="Alle wie viele Jahre die Sonderausgabe in der Ansparphase f√§llig wird. 0 = keine Sonderausgaben.">Sonderausgabe Anspar alle X J.</span>
              <input type="number" step="1" id="special_savings_interval" value="10" min="0" max="50">
            </label>
            <label class="field field--checkbox">
              <input type="checkbox" id="inflation_adjust_special_savings" checked>
              <span class="field-label" data-tooltip="Wenn aktiviert, steigen die Sonderausgaben j√§hrlich mit der Inflation (z.B. Autos werden teurer).">Sonderausgaben Anspar inflationsanpassen</span>
            </label>
          </div>
        </div>

        <div class="group">
          <div class="group__header">
            <h2>Entnahmephase</h2>
            <p>Rentenmodus, Sonderausgaben und Dauer.</p>
          </div>
          <div class="grid grid--split">
            <label class="field">
              <span class="field-label" data-tooltip="Wie lange du monatlich Geld entnehmen m√∂chtest (z.B. erwartete Rentendauer). ">Dauer Entnahme (Jahre)</span>
              <input type="number" step="1" id="years_withdraw" value="30" min="1" max="100">
            </label>
            <div class="field">
              <span class="field-label" data-tooltip="W√§hle zwischen fester monatlicher Entnahme in Euro oder prozentualem Anteil vom Gesamtverm√∂gen (4%-Regel).">Wunschrente</span>
              <div class="mode-switch">
                <label><input type="radio" name="rent_mode" value="eur" checked> EUR / Monat</label>
                <label><input type="radio" name="rent_mode" value="percent"> % vom Verm√∂gen (p.a.)</label>
              </div>
            </div>
            <label class="field">
              <span class="field-label" data-tooltip="Fester monatlicher Entnahmebetrag. Wird bei aktivierter Inflation j√§hrlich angepasst.">Wunschrente (EUR)</span>
              <input type="number" step="50" id="rent_eur" value="1000" min="0" max="1000000">
            </label>
            <label class="field field--checkbox">
              <input type="checkbox" id="rent_is_gross">
              <span class="field-label" data-tooltip="Wenn aktiviert: Der Betrag ist BRUTTO (Verkaufserl√∂s vor Steuern). Es werden ETF-Anteile im Wert dieses Betrags verkauft, dann werden Steuern abgezogen ‚Äì du erh√§ltst den Netto-Betrag. Beispiel: 1000‚Ç¨ brutto ‚Üí ~850‚Ç¨ netto bei 15% Steuerlast. Wenn deaktiviert (Standard): Der Betrag ist NETTO (nach Steuern) ‚Äì du erh√§ltst genau diesen Betrag, es werden entsprechend mehr ETF-Anteile verkauft um die Steuern zu decken.">Brutto-Entnahme (vor Steuern)</span>
            </label>
            <label class="field">
              <span class="field-label" data-tooltip="Entnahme als Prozent des Startverm√∂gens bei Entnahmebeginn (4%-Regel). Der Betrag wird dann j√§hrlich um die Inflation erh√∂ht. 4% gilt als sichere Entnahmerate √ºber 30 Jahre.">Wunschrente % vom Startverm√∂gen p.a.</span>
              <input type="number" step="0.1" id="rent_percent" value="4.0" min="0" max="100">
            </label>
            <label class="field">
              <span class="field-label" data-tooltip="Mindestentnahme pro Monat (nur bei %-Modus). Verhindert zu niedrige Entnahmen in schlechten B√∂rsenphasen.">Entnahme-Untergrenze (EUR/Monat)</span>
              <input type="number" step="50" id="withdrawal_min" value="0" min="0" max="1000000">
            </label>
            <label class="field">
              <span class="field-label" data-tooltip="Maximalentnahme pro Monat (nur bei %-Modus). Begrenzt Entnahmen in sehr guten B√∂rsenphasen. 0 = keine Grenze.">Entnahme-Obergrenze (EUR/Monat)</span>
              <input type="number" step="50" id="withdrawal_max" value="0" min="0" max="10000000">
            </label>
            <label class="field field--checkbox">
              <input type="checkbox" id="inflation_adjust_withdrawal" checked>
              <span class="field-label" data-tooltip="Erh√∂ht die Entnahme j√§hrlich um die Inflation, um die Kaufkraft zu erhalten. Klassische 4%-Regel nutzt dies.">Entnahme j√§hrlich inflationsanpassen (4%-Regel)</span>
            </label>
            <label class="field">
              <span class="field-label" data-tooltip="Gr√∂√üere Einmalausgaben in der Entnahmephase (z.B. Reisen, Pflege, Reparaturen). Werden zus√§tzlich zur Rente entnommen.">Sonderausgabe Entnahme (EUR)</span>
              <input type="number" step="500" id="special_withdraw" value="15000" min="0" max="10000000">
            </label>
            <label class="field">
              <span class="field-label" data-tooltip="Alle wie viele Jahre die Sonderausgabe in der Entnahmephase f√§llig wird. 0 = keine Sonderausgaben.">Sonderausgabe Entnahme alle X J.</span>
              <input type="number" step="1" id="special_withdraw_interval" value="10" min="0" max="50">
            </label>
            <label class="field field--checkbox">
              <input type="checkbox" id="inflation_adjust_special_withdrawal" checked>
              <span class="field-label" data-tooltip="Wenn aktiviert, steigen die Sonderausgaben in der Entnahmephase j√§hrlich mit der Inflation.">Sonderausgaben Entnahme inflationsanpassen</span>
            </label>
          </div>
        </div>

        <div class="group">
          <div class="group__header">
            <h2>Kapitalerhalt-Modus</h2>
            <p>Automatische Entnahme-Anpassung bei Verm√∂gensr√ºckgang.</p>
          </div>
          <div class="grid">
            <label class="field field--checkbox">
              <input type="checkbox" id="capital_preservation_enabled">
              <span class="field-label" data-tooltip="Aktiviert automatische Entnahme-Reduktion, wenn das Verm√∂gen unter den Schwellwert f√§llt.">Kapitalerhalt-Modus aktivieren</span>
            </label>
            <label class="field">
              <span class="field-label" data-tooltip="Verm√∂gensschwelle in % des Startverm√∂gens bei Entnahmebeginn. Unterschreitung l√∂st Reduktion aus.">Schwellwert (% vom Startverm√∂gen)</span>
              <input type="number" step="5" id="capital_preservation_threshold" value="80" min="10" max="100">
              <small class="field-hint">z.B. 80% = Reduktion bei 20% Verlust</small>
            </label>
            <label class="field">
              <span class="field-label" data-tooltip="Um wie viel Prozent die Entnahme reduziert wird, wenn der Schwellwert unterschritten wird.">Entnahme-Reduktion (%)</span>
              <input type="number" step="5" id="capital_preservation_reduction" value="25" min="5" max="75">
              <small class="field-hint">z.B. 25% Reduktion der Wunschrente</small>
            </label>
            <label class="field">
              <span class="field-label" data-tooltip="Wie viel % √ºber dem Schwellwert das Verm√∂gen liegen muss, um zur vollen Entnahme zur√ºckzukehren.">Erholungspuffer (% √ºber Schwelle)</span>
              <input type="number" step="5" id="capital_preservation_recovery" value="10" min="0" max="50">
              <small class="field-hint">z.B. 10% = volle Entnahme ab 90%</small>
            </label>
          </div>
        </div>

        <div class="group">
          <div class="group__header">
            <h2>Monte-Carlo-Simulation</h2>
            <p>Stochastische Analyse mit variabler ETF-Rendite.</p>
          </div>
          <div class="grid">
            <label class="field">
              <span class="field-label" data-tooltip="Wie oft die Simulation mit zuf√§lligen Renditen durchgef√ºhrt wird. Mehr = genauere Statistik, aber l√§nger. Empfohlen: 1.000-5.000.">Anzahl Simulationen</span>
              <input type="number" step="100" id="mc_iterations" value="1000" min="100" max="10000" aria-describedby="mc-iterations-hint">
              <small class="field-hint">100-10.000 Durchl√§ufe (empfohlen: 1.000-5.000 f√ºr gute Balance)</small>
            </label>
            <label class="field">
              <span class="field-label" data-tooltip="Standardabweichung der j√§hrlichen ETF-Rendite. H√∂here Werte = gr√∂√üere Schwankungen. MSCI World: ~15-17%.">ETF Volatilit√§t p.a. (%)</span>
              <input type="number" step="0.5" id="mc_volatility" value="15.0" min="1" max="50" aria-describedby="mc-volatility-hint">
              <small class="field-hint">Historisch ~15-20% f√ºr Aktien-ETFs</small>
            </label>
            <label class="field field--checkbox">
              <input type="checkbox" id="mc_show_individual" unchecked>
              <span class="field-label" data-tooltip="Zeigt bis zu 50 einzelne Simulationspfade im Chart an, um die Streuung zu visualisieren.">Einzelne Pfade anzeigen (max. 50)</span>
            </label>
            <label class="field">
              <span class="field-label" data-tooltip="Minimales Endverm√∂gen (real/inflationsbereinigt) f√ºr 'Erfolg'. Pfade unter dieser Schwelle gelten als gescheitert.">Erfolgsschwelle (‚Ç¨ real)</span>
              <input type="number" step="100" id="mc_success_threshold" value="100" min="0" max="1000000">
              <small class="field-hint">Endverm√∂gen > X‚Ç¨ real = Erfolg</small>
            </label>
            <label class="field">
              <span class="field-label" data-tooltip="Ruin-Schwelle als % des Verm√∂gens bei Rentenbeginn. F√§llt das Verm√∂gen in der Entnahmephase unter diesen Wert, gilt der Pfad als 'Ruin'.">Ruin-Schwelle (% Rentenbeginn)</span>
              <input type="number" step="1" id="mc_ruin_threshold" value="10" min="1" max="50">
              <small class="field-hint">Verm√∂gen &lt; X% = Ruin</small>
            </label>
            <label class="field">
              <span class="field-label" data-tooltip="Seed f√ºr Zufallsgenerator. Gleicher Seed = reproduzierbare Ergebnisse. 0 = zuf√§llig.">Random Seed (0=zuf√§llig)</span>
              <input type="number" step="1" id="mc_seed" value="0" min="0" max="999999">
              <small class="field-hint">F√ºr reproduzierbare Simulationen</small>
            </label>
          </div>
        </div>

        <div class="actions">
          <button type="submit" class="btn btn--primary">Simulation starten</button>
          <button type="button" id="btn-monte-carlo" class="btn btn--accent">Monte-Carlo starten</button>
          <div class="btn-group">
            <button type="button" id="btn-reset" class="btn btn--secondary">Zur√ºcksetzen</button>
            <div class="export-dropdown">
              <button type="button" class="btn btn--secondary" id="btn-export-toggle">
                Export ‚ñæ
              </button>
              <div class="export-menu" id="export-menu">
                <div class="export-menu-section">
                  <span class="export-menu-title">Standard-Simulation</span>
                  <button type="button" class="export-menu-item" id="btn-export-csv">CSV exportieren</button>
                  <button type="button" class="export-menu-item" id="btn-export-pdf">PDF exportieren</button>
                </div>
                <div class="export-menu-section">
                  <span class="export-menu-title">Monte-Carlo-Simulation</span>
                  <button type="button" class="export-menu-item" id="btn-export-mc-csv">CSV exportieren</button>
                  <button type="button" class="export-menu-item" id="btn-export-mc-pdf">PDF exportieren</button>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div id="message" class="message" role="alert" aria-live="polite"></div>
      </form>
    </section>

    <section class="panel panel--results" aria-label="Simulationsergebnisse">
      <!-- Tab Navigation -->
      <div class="tabs" role="tablist" aria-label="Ergebnis-Ansichten">
        <button class="tab tab--active" data-tab="standard" role="tab" aria-selected="true" aria-controls="tab-standard">
          <svg class="tab-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M3 3v18h18"/><path d="M18 9l-5 5-4-4-3 3"/>
          </svg>
          Standard
        </button>
        <button class="tab" data-tab="tabelle" role="tab" aria-selected="false" aria-controls="tab-tabelle">
          <svg class="tab-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="3" y="3" width="18" height="18" rx="2"/><path d="M3 9h18M3 15h18M9 3v18"/>
          </svg>
          Jahres√ºbersicht
        </button>
        <button class="tab" data-tab="monte-carlo" role="tab" aria-selected="false" aria-controls="tab-monte-carlo">
          <svg class="tab-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M12 2v4m0 12v4M4.93 4.93l2.83 2.83m8.48 8.48l2.83 2.83M2 12h4m12 0h4M4.93 19.07l2.83-2.83m8.48-8.48l2.83-2.83"/>
          </svg>
          Monte-Carlo
          <span class="tab-badge" id="mc-badge" style="display: none;">‚úì</span>
        </button>
      </div>

      <!-- Tab: Standard-Simulation -->
      <div class="tab-content tab-content--active" id="tab-standard" role="tabpanel" aria-labelledby="tab-standard-btn">
        <div class="result-header">
          <div>
            <p class="eyebrow">Visualisierung</p>
            <h2>Verm√∂gensverlauf</h2>
          </div>
          <div class="chart-controls">
            <button type="button" class="btn-scale" id="btn-std-log" title="Logarithmische Skala">
              Log
            </button>
            <button type="button" class="btn-scale btn-scale--active" id="btn-std-linear" title="Lineare Skala">
              Linear
            </button>
          </div>
        </div>
        <div class="mc-legend">
          <span class="legend__item"><span class="dot dot--total"></span>Gesamtverm√∂gen</span>
          <span class="legend__item"><span class="dot dot--real"></span>Gesamt (inflationsbereinigt)</span>
        </div>
        <div class="graph-wrapper">
          <canvas id="graph" aria-label="Verm√∂gensgraph"></canvas>
        </div>

        <div class="result-header result-header--stats">
          <div>
            <p class="eyebrow">Zusammenfassung</p>
            <h2>Simulationsergebnisse</h2>
          </div>
          <div class="stats-toggle">
            <button type="button" class="stats-toggle-btn stats-toggle-btn--active" id="btn-stats-nominal">Nominal</button>
            <button type="button" class="stats-toggle-btn" id="btn-stats-real">Inflationsbereinigt</button>
          </div>
        </div>
        <div id="stats-panel" class="stats-panel">
          <!-- Nominale Werte -->
          <div class="stats-section" id="stats-section-nominal">
            <div class="stats-grid">
              <div class="stat-card">
                <span class="stat-label">Endverm√∂gen</span>
                <span class="stat-value" id="stat-end-nominal">-</span>
              </div>
              <div class="stat-card">
                <span class="stat-label">Verm√∂gen bei Rentenbeginn</span>
                <span class="stat-value" id="stat-retirement-wealth-nominal">-</span>
              </div>
              <div class="stat-card">
                <span class="stat-label">Eingezahlt gesamt</span>
                <span class="stat-value" id="stat-total-invested">-</span>
              </div>
              <div class="stat-card">
                <span class="stat-label">Rendite gesamt</span>
                <span class="stat-value" id="stat-total-return">-</span>
              </div>
              <div class="stat-card stat-card--clickable" id="stat-card-avg-nominal" title="Klicken zum Umschalten: mit/ohne Sonderausgaben">
                <span class="stat-label">√ò Entnahme/Monat <span class="stat-toggle-hint" id="stat-toggle-hint-1">ohne Sonder</span></span>
                <span class="stat-value" id="stat-avg-withdrawal">-</span>
              </div>
              <div class="stat-card stat-card--clickable" id="stat-card-minmax-nominal" title="Klicken zum Umschalten: mit/ohne Sonderausgaben">
                <span class="stat-label">Min/Max Entnahme <span class="stat-toggle-hint" id="stat-toggle-hint-2">ohne Sonder</span></span>
                <span class="stat-value" id="stat-minmax-withdrawal">-</span>
              </div>
              <div class="stat-card">
                <span class="stat-label">Entnahmen gesamt</span>
                <span class="stat-value" id="stat-total-withdrawals">-</span>
              </div>
              <div class="stat-card">
                <span class="stat-label">Steuern gesamt</span>
                <span class="stat-value" id="stat-total-tax">-</span>
              </div>
              <div class="stat-card">
                <span class="stat-label">davon Vorabpauschale</span>
                <span class="stat-value" id="stat-vorabpauschale">-</span>
              </div>
              <div class="stat-card">
                <span class="stat-label">Effektive Entnahmerate</span>
                <span class="stat-value" id="stat-effective-rate">-</span>
              </div>
              <div class="stat-card stat-card--capital-preservation" id="stat-card-capital-preservation" style="display: none;">
                <span class="stat-label">Kapitalerhalt aktiv</span>
                <span class="stat-value" id="stat-capital-preservation-months">-</span>
                <small class="stat-hint" id="stat-capital-preservation-hint">Monate mit reduzierter Entnahme</small>
              </div>
            </div>
          </div>
          
          <!-- Inflationsbereinigte Werte -->
          <div class="stats-section stats-section--hidden" id="stats-section-real">
            <div class="stats-grid">
              <div class="stat-card">
                <span class="stat-label">Endverm√∂gen (Kaufkraft heute)</span>
                <span class="stat-value stat-value--highlight" id="stat-end-real">-</span>
              </div>
              <div class="stat-card">
                <span class="stat-label">Verm√∂gen bei Rentenbeginn</span>
                <span class="stat-value stat-value--highlight" id="stat-retirement-wealth-real">-</span>
              </div>
              <div class="stat-card">
                <span class="stat-label">Eingezahlt gesamt</span>
                <span class="stat-value" id="stat-total-invested-real">-</span>
                <small class="stat-hint">Nominal, nicht inflationsbereinigt</small>
              </div>
              <div class="stat-card">
                <span class="stat-label">Rendite gesamt (real)</span>
                <span class="stat-value" id="stat-total-return-real">-</span>
              </div>
              <div class="stat-card stat-card--clickable" id="stat-card-avg-real" title="Klicken zum Umschalten: mit/ohne Sonderausgaben">
                <span class="stat-label">√ò Entnahme/Monat <span class="stat-toggle-hint" id="stat-toggle-hint-3">ohne Sonder</span></span>
                <span class="stat-value stat-value--highlight" id="stat-avg-withdrawal-real">-</span>
              </div>
              <div class="stat-card stat-card--clickable" id="stat-card-minmax-real" title="Klicken zum Umschalten: mit/ohne Sonderausgaben">
                <span class="stat-label">Min/Max Entnahme <span class="stat-toggle-hint" id="stat-toggle-hint-4">ohne Sonder</span></span>
                <span class="stat-value stat-value--highlight" id="stat-minmax-withdrawal-real">-</span>
              </div>
              <div class="stat-card">
                <span class="stat-label">Entnahmen gesamt (real)</span>
                <span class="stat-value" id="stat-total-withdrawals-real">-</span>
              </div>
              <div class="stat-card">
                <span class="stat-label">Kaufkraftverlust</span>
                <span class="stat-value" id="stat-purchasing-power-loss">-</span>
                <small class="stat-hint">Durch Inflation √ºber die Laufzeit</small>
              </div>
              <div class="stat-card">
                <span class="stat-label">Reale Rendite p.a.</span>
                <span class="stat-value" id="stat-real-return-pa">-</span>
                <small class="stat-hint">Nach Abzug der Inflation</small>
              </div>
              <div class="stat-card">
                <span class="stat-label">Effektive Entnahmerate</span>
                <span class="stat-value" id="stat-effective-rate-real">-</span>
              </div>
            </div>
          </div>
          <div id="stat-warning" class="stat-warning"></div>
        </div>
      </div>

      <!-- Tab: Monte-Carlo -->
      <div class="tab-content" id="tab-monte-carlo" role="tabpanel" aria-labelledby="tab-monte-carlo-btn">
        <div class="mc-empty-state" id="mc-empty-state">
          <div class="mc-empty-icon">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
              <path d="M12 2v4m0 12v4M4.93 4.93l2.83 2.83m8.48 8.48l2.83 2.83M2 12h4m12 0h4M4.93 19.07l2.83-2.83m8.48-8.48l2.83-2.83"/>
              <circle cx="12" cy="12" r="3"/>
            </svg>
          </div>
          <h3>Monte-Carlo-Simulation starten</h3>
          <p>Klicke auf "Monte-Carlo starten" um eine stochastische Analyse mit variabler ETF-Rendite durchzuf√ºhren.</p>
          <p class="mc-empty-hint">Die Simulation f√ºhrt hunderte Durchl√§ufe mit zuf√§lligen Renditen durch und zeigt die Erfolgswahrscheinlichkeit deiner Entnahme-Strategie.</p>
        </div>

        <div id="mc-results" class="mc-results" style="display: none;">
          <div class="mc-progress-bar" id="mc-progress-bar">
            <progress id="mc-progress" value="0" max="100"></progress>
            <span id="mc-progress-text"></span>
          </div>

          <!-- Warnungen f√ºr optimistische Parameter -->
          <div class="mc-warnings" id="mc-warnings" style="display: none;">
            <div class="mc-warning" id="mc-warning-optimistic">
              <span class="mc-warning-icon">‚ö†Ô∏è</span>
              <span class="mc-warning-text" id="mc-warning-text">Die gew√§hlten Parameter sind historisch sehr optimistisch.</span>
            </div>
          </div>
          
          <!-- Verbrauchsjahre-Info (wann ist Verm√∂gen aufgebraucht) -->
          <div class="mc-depletion-info" id="mc-depletion-info" style="display: none;">
            <span class="mc-depletion-icon">‚è≥</span>
            <span class="mc-depletion-text" id="mc-depletion-text"></span>
          </div>

          <!-- Highlight: Erfolgswahrscheinlichkeit -->
          <div class="mc-highlight">
            <div class="mc-highlight-main">
              <span class="mc-highlight-label" data-tooltip="Erfolg = Keine deutlichen Engp√§sse (‚â•1% oder 50‚Ç¨ unter Ziel) w√§hrend der Entnahmephase UND Endverm√∂gen √ºber der eingestellten Schwelle in heutiger Kaufkraft.">Erfolgswahrscheinlichkeit</span>
              <span class="mc-highlight-value" id="mc-success-rate">-</span>
              <span class="mc-highlight-hint" id="mc-success-hint">Keine Entnahme-Shortfalls &amp; Endverm√∂gen &gt; 100‚Ç¨ real</span>
            </div>
            <div class="mc-highlight-secondary">
              <span class="mc-highlight-label-small">Soft-Erfolg (nur Endverm√∂gen)</span>
              <span class="mc-highlight-value-small" id="mc-success-rate-soft">-</span>
            </div>
            <div class="mc-highlight-meta">
              <span id="mc-iterations-done">-</span> Simulationen durchgef√ºhrt
            </div>
          </div>

          <!-- Chart direkt nach Erfolgswahrscheinlichkeit (wie bei Standard) -->
          <div class="result-header">
            <div>
              <p class="eyebrow">Visualisierung</p>
              <h2>Verm√∂gensverteilung √ºber Zeit</h2>
            </div>
            <div class="chart-controls">
              <button type="button" class="btn-scale btn-scale--active" id="btn-mc-log" title="Logarithmische Skala">
                Log
              </button>
              <button type="button" class="btn-scale" id="btn-mc-linear" title="Lineare Skala">
                Linear
              </button>
            </div>
          </div>
          <div class="mc-legend">
            <span class="legend__item"><span class="dot dot--mc-median"></span>Median (50%)</span>
            <span class="legend__item"><span class="dot dot--mc-50"></span>25%-75%</span>
            <span class="legend__item"><span class="dot dot--mc-80"></span>10%-90%</span>
            <span class="legend__item"><span class="dot dot--mc-p5"></span>5% (Worst)</span>
            <span class="legend__item"><span class="dot dot--mc-p95"></span>95% (Best)</span>
          </div>
          <div class="graph-wrapper">
            <canvas id="mc-graph" aria-label="Monte-Carlo Verm√∂gensgraph"></canvas>
          </div>

          <!-- Statistiken (wie bei Standard: nach dem Chart) -->
          <div class="result-header result-header--stats">
            <div>
              <p class="eyebrow">Zusammenfassung</p>
              <h2>Simulationsergebnisse</h2>
            </div>
            <div class="stats-toggle">
              <button type="button" class="stats-toggle-btn stats-toggle-btn--active" id="btn-mc-stats-nominal">Nominal</button>
              <button type="button" class="stats-toggle-btn" id="btn-mc-stats-real">Inflationsbereinigt</button>
            </div>
          </div>
          
          <!-- Nominale Werte -->
          <div class="stats-section" id="mc-stats-section-nominal">
            <div class="mc-stats-section">
              <h4 class="mc-stats-title">Endverm√∂gen</h4>
              <div class="stats-grid stats-grid--mc">
                <div class="stat-card stat-card--mc">
                  <span class="stat-label">Median (50%)</span>
                  <span class="stat-value" id="mc-median-end">-</span>
                  <small class="stat-hint">Typischer Verlauf</small>
                </div>
                <div class="stat-card stat-card--mc">
                  <span class="stat-label">Spanne (10%-90%)</span>
                  <span class="stat-value" id="mc-range-end">-</span>
                  <small class="stat-hint">80% Konfidenzintervall</small>
                </div>
                <div class="stat-card stat-card--mc stat-card--worst">
                  <span class="stat-label">Konservativ (25%)</span>
                  <span class="stat-value" id="mc-worst-case">-</span>
                  <small class="stat-hint">Jeder 4. Fall ist schlechter</small>
                </div>
                <div class="stat-card stat-card--mc stat-card--best">
                  <span class="stat-label">Optimistisch (75%)</span>
                  <span class="stat-value" id="mc-best-case">-</span>
                  <small class="stat-hint">Jeder 4. Fall ist besser</small>
                </div>
              </div>
            </div>

            <div class="mc-stats-section">
              <h4 class="mc-stats-title">Entnahmen & Rente</h4>
              <div class="stats-grid stats-grid--mc">
                <div class="stat-card stat-card--mc">
                  <span class="stat-label">√ò Monatliche Rente</span>
                  <span class="stat-value" id="mc-avg-monthly-withdrawal">-</span>
                  <small class="stat-hint">Median √ºber alle Simulationen</small>
                </div>
                <div class="stat-card stat-card--mc">
                  <span class="stat-label">Entnahmen gesamt</span>
                  <span class="stat-value" id="mc-total-withdrawals">-</span>
                  <small class="stat-hint">Median Gesamtentnahme</small>
                </div>
                <div class="stat-card stat-card--mc">
                  <span class="stat-label">Verm√∂gen bei Rentenbeginn</span>
                  <span class="stat-value" id="mc-retirement-wealth">-</span>
                  <small class="stat-hint">Median am Start der Entnahme</small>
                </div>
                <div class="stat-card stat-card--mc">
                  <span class="stat-label">Durchschnittl. Endverm√∂gen</span>
                  <span class="stat-value" id="mc-mean-end">-</span>
                  <small class="stat-hint">Arithmetisches Mittel</small>
                </div>
              </div>
            </div>

            <div class="mc-stats-section">
              <h4 class="mc-stats-title">Risikokennzahlen</h4>
              <div class="stats-grid stats-grid--mc">
                <div class="stat-card stat-card--mc">
                  <span class="stat-label">Kapitalerhalt (nominal)</span>
                  <span class="stat-value" id="mc-capital-preservation">-</span>
                  <small class="stat-hint">Endverm√∂gen ‚â• Startverm√∂gen (ohne Inflationsausgleich)</small>
                </div>
                <div class="stat-card stat-card--mc">
                  <span class="stat-label">Pleite-Risiko (Pfad)</span>
                  <span class="stat-value" id="mc-ruin-probability">-</span>
                  <small class="stat-hint">Verm√∂gen unter Ruin-Schwelle oder Shortfall in Entnahmephase</small>
                </div>
                <div class="stat-card stat-card--mc">
                  <span class="stat-label">Shortfall-Quote (Entnahme)</span>
                  <span class="stat-value" id="mc-shortfall-rate" data-tooltip="Shortfall-Details werden nach der Simulation angezeigt.">-</span>
                  <small class="stat-hint" data-tooltip="Shortfall = Auszahlung mind. 1% oder 50‚Ç¨ unter Ziel (Anspar: >50‚Ç¨ Unterdeckung). Details nach Simulation.">Entnahme ‚â•1% (min. 50‚Ç¨) unter Ziel (Hover f√ºr Details)</small>
                </div>
              </div>
            </div>
          </div>

          <!-- Inflationsbereinigte Werte -->
          <div class="stats-section stats-section--hidden" id="mc-stats-section-real">
            <div class="mc-stats-section">
              <h4 class="mc-stats-title">Endverm√∂gen (Kaufkraft heute)</h4>
              <div class="stats-grid stats-grid--mc">
                <div class="stat-card stat-card--mc">
                  <span class="stat-label">Median (50%)</span>
                  <span class="stat-value stat-value--highlight" id="mc-median-end-real">-</span>
                  <small class="stat-hint">Typischer Verlauf in heutiger Kaufkraft</small>
                </div>
                <div class="stat-card stat-card--mc">
                  <span class="stat-label">Spanne (10%-90%)</span>
                  <span class="stat-value stat-value--highlight" id="mc-range-end-real">-</span>
                  <small class="stat-hint">80% Konfidenzintervall</small>
                </div>
                <div class="stat-card stat-card--mc stat-card--worst">
                  <span class="stat-label">Konservativ (25%)</span>
                  <span class="stat-value" id="mc-worst-case-real">-</span>
                  <small class="stat-hint">In heutiger Kaufkraft</small>
                </div>
                <div class="stat-card stat-card--mc stat-card--best">
                  <span class="stat-label">Optimistisch (75%)</span>
                  <span class="stat-value" id="mc-best-case-real">-</span>
                  <small class="stat-hint">In heutiger Kaufkraft</small>
                </div>
              </div>
            </div>

            <div class="mc-stats-section">
              <h4 class="mc-stats-title">Entnahmen & Rente (real)</h4>
              <div class="stats-grid stats-grid--mc">
                <div class="stat-card stat-card--mc">
                  <span class="stat-label">√ò Monatliche Rente</span>
                  <span class="stat-value stat-value--highlight" id="mc-avg-monthly-withdrawal-real">-</span>
                  <small class="stat-hint">Median in heutiger Kaufkraft</small>
                </div>
                <div class="stat-card stat-card--mc">
                  <span class="stat-label">Entnahmen gesamt</span>
                  <span class="stat-value" id="mc-total-withdrawals-real">-</span>
                  <small class="stat-hint">Median in heutiger Kaufkraft</small>
                </div>
                <div class="stat-card stat-card--mc">
                  <span class="stat-label">Verm√∂gen bei Rentenbeginn</span>
                  <span class="stat-value stat-value--highlight" id="mc-retirement-wealth-real">-</span>
                  <small class="stat-hint">Median in heutiger Kaufkraft</small>
                </div>
                <div class="stat-card stat-card--mc">
                  <span class="stat-label">Kaufkraftverlust</span>
                  <span class="stat-value" id="mc-purchasing-power-loss">-</span>
                  <small class="stat-hint">Durch Inflation √ºber die Laufzeit</small>
                </div>
              </div>
            </div>

            <div class="mc-stats-section">
              <h4 class="mc-stats-title">Risikokennzahlen</h4>
              <div class="stats-grid stats-grid--mc">
                <div class="stat-card stat-card--mc">
                  <span class="stat-label">Kapitalerhalt (real)</span>
                  <span class="stat-value" id="mc-capital-preservation-real">-</span>
                  <small class="stat-hint">Kaufkraft erhalten: Endverm√∂gen real ‚â• Startverm√∂gen real</small>
                </div>
                <div class="stat-card stat-card--mc">
                  <span class="stat-label">Pleite-Risiko (Pfad)</span>
                  <span class="stat-value" id="mc-ruin-probability-real">-</span>
                  <small class="stat-hint">Verm√∂gen unter Ruin-Schwelle oder Shortfall in Entnahmephase</small>
                </div>
                <div class="stat-card stat-card--mc">
                  <span class="stat-label">Reale Rendite p.a.</span>
                  <span class="stat-value" id="mc-real-return-pa">-</span>
                  <small class="stat-hint">Nach Abzug der Inflation</small>
                </div>
              </div>
            </div>
          </div>

          <!-- Sequence-of-Returns Risk -->
          <div class="mc-stats-section">
            <h4 class="mc-stats-title mc-stats-title--sorr">
              Sequence-of-Returns-Risk (SoRR)
            </h4>
            <p class="mc-stats-desc">Zeigt, wie stark die <strong>Reihenfolge der Renditen</strong> in den ersten Jahren der Entnahmephase das Endergebnis beeinflusst.</p>
            <!-- Dynamische SoRR-Erkl√§rung -->
            <div class="mc-sorr-explanation" id="mc-sorr-explanation">
              <p id="mc-sorr-explanation-text">Die SoRR-Analyse wird nach der Simulation angezeigt.</p>
            </div>
            <div class="stats-grid stats-grid--mc">
              <div class="stat-card stat-card--mc stat-card--sorr-main" data-tooltip="Differenz zwischen dem durchschnittlichen Endverm√∂gen bei guten vs. schlechten fr√ºhen Renditen, in % des Verm√∂gens bei Rentenbeginn.">
                <span class="stat-label">SoRR-Spreizung</span>
                <span class="stat-value" id="mc-sorr-score">-</span>
                <small class="stat-hint">Unterschied beste vs. schlechteste Sequenz</small>
              </div>
              <div class="stat-card stat-card--mc stat-card--worst" data-tooltip="So viel weniger Endverm√∂gen hast du im Schnitt, wenn die ersten 5 Jahre der Entnahmephase schlecht laufen (unterstes Quintil der Renditen).">
                <span class="stat-label">Fr√ºher Crash-Effekt</span>
                <span class="stat-value" id="mc-sorr-early-bad">-</span>
                <small class="stat-hint">Endverm√∂gen-Reduktion bei fr√ºhem Crash</small>
              </div>
              <div class="stat-card stat-card--mc stat-card--best" data-tooltip="So viel mehr Endverm√∂gen hast du im Schnitt, wenn die ersten 5 Jahre der Entnahmephase gut laufen (oberstes Quintil der Renditen).">
                <span class="stat-label">Fr√ºher Boom-Effekt</span>
                <span class="stat-value" id="mc-sorr-early-good">-</span>
                <small class="stat-hint">Endverm√∂gen-Bonus bei fr√ºhem Boom</small>
              </div>
              <div class="stat-card stat-card--mc" data-tooltip="Statistische Korrelation zwischen fr√ºhen Renditen und Endverm√∂gen. 100% = perfekte Korrelation, 0% = kein Zusammenhang.">
                <span class="stat-label">Korrelation fr√ºhe Rendite ‚Üî Ende</span>
                <span class="stat-value" id="mc-sorr-correlation">-</span>
                <small class="stat-hint">Wie stark bestimmen fr√ºhe Jahre das Ende</small>
              </div>
              <div class="stat-card stat-card--mc stat-card--worst" data-tooltip="Durchschnittliches Endverm√∂gen der Simulationen mit den schlechtesten fr√ºhen Renditen (unterstes Quintil).">
                <span class="stat-label">Endverm√∂gen (schlechte Sequenz)</span>
                <span class="stat-value" id="mc-sorr-worst-seq">-</span>
                <small class="stat-hint">√ò bei schlechten fr√ºhen Renditen</small>
              </div>
              <div class="stat-card stat-card--mc stat-card--best" data-tooltip="Durchschnittliches Endverm√∂gen der Simulationen mit den besten fr√ºhen Renditen (oberstes Quintil).">
                <span class="stat-label">Endverm√∂gen (gute Sequenz)</span>
                <span class="stat-value" id="mc-sorr-best-seq">-</span>
                <small class="stat-hint">√ò bei guten fr√ºhen Renditen</small>
              </div>
              <div class="stat-card stat-card--mc" data-tooltip="Die Jahre nach Rentenbeginn, in denen die Renditen den st√§rksten Einfluss auf das Endergebnis haben.">
                <span class="stat-label">Kritisches Fenster</span>
                <span class="stat-value" id="mc-sorr-vulnerability">-</span>
                <small class="stat-hint">H√∂chste Sensitivit√§t in diesen Jahren</small>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Tab: Jahres√ºbersicht -->
      <div class="tab-content" id="tab-tabelle">
        <div class="result-header">
          <div>
            <p class="eyebrow">Jahres√ºbersicht</p>
            <h2>Aggregierte Werte pro Jahr</h2>
          </div>
        </div>
        <div class="table-wrapper">
          <table id="year-table">
            <thead>
              <tr>
                <th>Jahr</th>
                <th>Phase</th>
                <th>TG-Saldo</th>
                <th>ETF-Saldo</th>
                <th>Gesamt</th>
                <th>Gesamt (real)</th>
                <th>Rendite</th>
                <th>Entnahme</th>
                <th>Steuern</th>
                <th>Freibetrag genutzt</th>
                <th>Verlusttopf</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
      </div>
    </section>
  </main>

  <footer class="footer">
    <p>Statische Web-App</p>
  </footer>

  <div id="tooltip" class="tooltip" aria-hidden="true"></div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <script src="app.js"></script>
</body>
</html>
